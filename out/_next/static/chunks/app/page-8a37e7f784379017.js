(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5369:(e,t,l)=>{Promise.resolve().then(l.bind(l,2825))},2825:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>f});var n=l(5155),r=l(2115),s=l(4143),a=l.n(s);function i(e){var t,l,s,i;let{players:u,onPlayersUpdate:o,highlight:h}=e,c=(0,r.useRef)(null),d=(0,r.useRef)(null),f=(0,r.useRef)(null),g=(0,r.useRef)(null),p=(0,r.useCallback)(()=>{o([c.current.value.trim(),d.current.value.trim(),f.current.value.trim(),g.current.value.trim()])},[o]);return(0,n.jsxs)("div",{className:a().Game,children:[(0,n.jsx)("input",{ref:c,value:null!==(t=u[0])&&void 0!==t?t:"",onChange:p,className:h&&u[0]===h?a().Highlight:""}),(0,n.jsx)("input",{ref:d,value:null!==(l=u[1])&&void 0!==l?l:"",onChange:p,className:h&&u[1]===h?a().Highlight:""}),"\xa0vs\xa0",(0,n.jsx)("input",{ref:f,value:null!==(s=u[2])&&void 0!==s?s:"",onChange:p,className:h&&u[2]===h?a().Highlight:""}),(0,n.jsx)("input",{ref:g,value:null!==(i=u[3])&&void 0!==i?i:"",onChange:p,className:h&&u[3]===h?a().Highlight:""})]})}var u=l(8334),o=l.n(u),h=l(923),c=l.n(h);function d(e){let{table:t,highlight:l,setHighlight:s}=e,[a,i]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=new Set(t.flat(2));e.delete(""),i(Array.from(e))},[t]),(0,n.jsx)(n.Fragment,{children:a.map(e=>(0,n.jsxs)("div",{className:c().Player,onPointerEnter:()=>s(e),onPointerLeave:()=>s(""),children:[(0,n.jsx)("b",{className:e===l?c().Highlight:"",children:e})," : ",t.flat(2).filter(t=>t===e).length," games"]},"player stats "+e))})}function f(){let[e,t]=(0,r.useState)([[["","","",""],["","","",""]],[["","","",""],["","","",""]],[["","","",""],["","","",""]],[["","","",""],["","","",""]],[["","","",""],["","","",""]],[["","","",""],["","","",""]]]),[l,s]=(0,r.useState)([]),[a,u]=(0,r.useState)([]),[h,c]=(0,r.useState)([]),[f,g]=(0,r.useState)("");(0,r.useEffect)(()=>{let t={doesntMeets:function(e){let t=new Set(e.flat().flat());t.delete("");let l=[];for(let n of t){let r=function(e,t,l){let n=new Set(t);for(let t of(n.delete(l),e))for(let e of t)if(e.includes(l))for(let t of e)n.delete(t);return Array.from(n)}(e,t,n);0!==r.length&&l.push({player:n,doesntMeet:r})}return l}(e),inARows:function(e){let t=new Set(e.flat().flat());t.delete("");let l=[];for(let n of t){let t=function(e,t){for(let l of e)if(l.filter(e=>e.includes(t)).length>1)return l;return null}(e,n);null!=t&&l.push({player:n,row:t})}return l}(e),consecutives:function(e){let t=new Set(e.flat(2));t.delete("");let l=[];for(let n of t){let t=function(e,t){let l=[];for(let n=0;n<e.length;n++)e[n].some(e=>e.includes(t))&&l.push(n);if(0===l.length)return null;let n=[],r=[];for(let e=0;e<l.length;e++)0===e||l[e]===l[e-1]+1?r.push(l[e]):(r.length>1&&n.push(r),r=[l[e]]);return(r.length>1&&n.push(r),0===n.length)?null:n.flat()}(e,n);null!=t&&l.push({player:n,rowIndices:t})}return l}(e)};s(t.doesntMeets),u(t.inARows),c(t.consecutives)},[e]);let p=(e,t,l)=>{e.dataTransfer.setData("text/plain",JSON.stringify({rowIndex:t,gameIndex:l}))},x=(e,l,n)=>{e.preventDefault();let r=JSON.parse(e.dataTransfer.getData("text/plain"));console.log("handleDrop ",l,n,r),t(e=>{let t=JSON.parse(JSON.stringify(e));return[t[r.rowIndex][r.gameIndex],t[l][n]]=[e[l][n],e[r.rowIndex][r.gameIndex]],t})},m=e=>{e.preventDefault()};return(0,n.jsxs)("div",{children:[(0,n.jsxs)("table",{className:o().Table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"1코트"}),(0,n.jsx)("td",{children:"2코트"})]})}),(0,n.jsx)("tbody",{children:e.map((e,l)=>(0,n.jsx)("tr",{className:a.map(e=>e.row).includes(e)?o().InARow:"",children:e.map((e,r)=>(0,n.jsx)("td",{draggable:!0,onDragStart:e=>p(e,l,r),onDrop:e=>x(e,l,r),onDragOver:m,children:(0,n.jsx)(i,{players:e,onPlayersUpdate:e=>{t(t=>{let n=[...t];return n[l]=[...n[l]],n[l][r]=e,n})},highlight:f})},l+" "+r+" td"))},l+" tr"))})]}),(0,n.jsx)("hr",{}),(0,n.jsx)(d,{table:e,highlight:f,setHighlight:g}),(0,n.jsx)("hr",{}),h.length>0&&(0,n.jsx)(n.Fragment,{children:h.map(e=>{let{player:t,rowIndices:l}=e;return(0,n.jsxs)("div",{children:[t," has consecutive games in row ",l.join(", ")]},"consecutive "+t)})}),(0,n.jsx)("br",{}),l.length>0&&(0,n.jsx)(n.Fragment,{children:l.toSorted((e,t)=>t.doesntMeet.length-e.doesntMeet.length).map(e=>{let{player:t,doesntMeet:l}=e;return(0,n.jsxs)("div",{children:[t," doesn't meet ",l.join(", ")]},"doesntMeets "+t)})}),(0,n.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(e))},children:"Copy"}),(0,n.jsx)("button",{onClick:()=>{let e=window.prompt("json");null!=e&&t(JSON.parse(e))},children:"Paste"})]})}},4143:e=>{e.exports={Game:"Game_Game__it_qB",Highlight:"Game_Highlight__7z73c"}},923:e=>{e.exports={Player:"PlayerStats_Player__ncLUQ",Highlight:"PlayerStats_Highlight__q0EeJ"}},8334:e=>{e.exports={Table:"page_Table__azPqz",InARow:"page_InARow__PxQ3h"}}},e=>{var t=t=>e(e.s=t);e.O(0,[783,441,517,358],()=>t(5369)),_N_E=e.O()}]);